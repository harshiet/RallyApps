<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<meta name="Name" content="App Example: Placeholder Query" />
<title>Placeholder Query Example</title>
<script type="text/javascript"
	src="https://rally1.rallydev.com/apps/1.32/sdk.js"></script>
<script type="text/javascript">
	function placeholderQueryExample() {
		var aDiv = document.getElementById('aDiv');
		aDiv.innerHTML = '<b>correlatedQueryExample</b><br>$t_$ta_$ta';

		var showDefectsByOwner = function(results) {
			for (i = 0; i < results.iterations.length; i++) {
				var queryConfig = {
					type : 'task',
					key : 'tasks',
					query : '(Iteration.ObjectID = '
							+ results.iterations[i].ObjectID + ')',
					fetch : 'Name,Iteration,Name'
				};
				rallyDataSource.find(queryConfig, showTasks);
			}
		};
		var showTasks = function(results) {
			for (i = 0; i < results.tasks.length; i++) {
				aDiv.innerHTML += "&nbsp;" + results.tasks[i].Iteration.Name + "," + results.tasks[i].Name + "<br>";
			}
 		};
		var queryConfig = {
			type : 'iteration',
			key : 'iterations',
			fetch : 'ObjectID'
		};

		var rallyDataSource;
		rallyDataSource = new rally.sdk.data.RallyDataSource(
				'__WORKSPACE_OID__', '__PROJECT_OID__',
				'__PROJECT_SCOPING_UP__', '__PROJECT_SCOPING_DOWN__');
		rallyDataSource.find(queryConfig, showDefectsByOwner);
	}

	rally.addOnLoad(placeholderQueryExample);
</script>

</head>
<body>
	<div id="aDiv"></div>
</body>
</html>